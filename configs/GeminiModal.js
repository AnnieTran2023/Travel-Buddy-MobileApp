const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location : Lahti, Finland, starting from Location Helsinki, Finland, from 17-11-2024 to 20-11-2024 for Just me with a Budget-Friendly budget with a transport details , transport Price with transport Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time to visit each of the location for 4 with each day plan with best time to visit in JSON Format",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "tripDetails": {\n    "startDate": "2024-11-17",\n    "endDate": "2024-11-20",\n    "destination": "Lahti, Finland",\n    "origin": "Helsinki, Finland",\n    "travelerCount": 1,\n    "budget": "Budget-Friendly"\n  },\n  "transportation": {\n    "Helsinki to Lahti": {\n      "mode": "Train",\n      "provider": "VR (Finnish Railways)",\n      "bookingUrl": "https://www.vr.fi/en",\n      "price": "€10-€20 (one-way)",\n      "details": "Trains run frequently between Helsinki and Lahti. The journey takes approximately 1 hour and 15 minutes."\n    },\n    "Lahti to Helsinki": {\n      "mode": "Train",\n      "provider": "VR (Finnish Railways)",\n      "bookingUrl": "https://www.vr.fi/en",\n      "price": "€10-€20 (one-way)",\n      "details": "Trains run frequently between Lahti and Helsinki. The journey takes approximately 1 hour and 15 minutes."\n    }\n  },\n  "accommodations": [\n    {\n      "hotelName": "Scandic Lahti",\n      "hotelAddress": "Satamakatu 1, 15110 Lahti, Finland",\n      "price": "€80-€120 per night",\n      "hotelImageUrl": "https://www.scandichotels.com/media/images/hotels/scandic-lahti-exterior-1.jpg",\n      "geoCoordinates": "60.9886, 25.6434",\n      "rating": "4 stars",\n      "description": "Modern hotel located in the heart of Lahti, close to the train station and the city center."\n    },\n    {\n      "hotelName": "Lahti Hostel",\n      "hotelAddress": "Kirkkokatu 22, 15110 Lahti, Finland",\n      "price": "€25-€40 per night",\n      "hotelImageUrl": "https://www.hostelworld.com/hostels/Finland/Lahti/Lahti-Hostel/images/173623",\n      "geoCoordinates": "60.9879, 25.6408",\n      "rating": "3 stars",\n      "description": "Budget-friendly hostel offering shared and private rooms, located near the city center."\n    },\n    {\n      "hotelName": "Hotelli Lahden Seurahuone",\n      "hotelAddress": "Kirkkokatu 11, 15110 Lahti, Finland",\n      "price": "€100-€150 per night",\n      "hotelImageUrl": "https://www.lahdenseurahuone.fi/media/images/hotelli-lahden-seurahuone-hotel-lahti-finland-gallery_01.jpg",\n      "geoCoordinates": "60.9883, 25.6419",\n      "rating": "4 stars",\n      "description": "Historic hotel with a charming atmosphere, located in the city center."\n    }\n  ],\n  "dailyItinerary": [\n    {\n      "day": "Day 1 (2024-11-17)",\n      "activities": [\n        {\n          "time": "09:00 - 11:00",\n          "placeName": "Lahti Art Museum",\n          "placeDetails": "Explore contemporary and traditional Finnish art in this modern museum.",\n          "placeImageUrl": "https://lahdentaidemuseo.fi/wp-content/uploads/2021/05/lahden-taidemuseo-ulkonap-2021-2.jpg",\n          "geoCoordinates": "60.9875, 25.6416",\n          "ticketPricing": "Free admission on Wednesdays",\n          "timeToVisit": "1-2 hours"\n        },\n        {\n          "time": "11:30 - 13:30",\n          "placeName": "Sibelius Hall",\n          "placeDetails": "Enjoy a concert or guided tour of this iconic concert hall, home to the Lahti Symphony Orchestra.",\n          "placeImageUrl": "https://www.lahdenorkesteri.fi/media/images/sibelius-hall-lahti-finland.jpg",\n          "geoCoordinates": "60.9888, 25.6445",\n          "ticketPricing": "Varies depending on the event",\n          "timeToVisit": "1-2 hours"\n        },\n        {\n          "time": "14:00 - 16:00",\n          "placeName": "Lahti City Center",\n          "placeDetails": "Wander through the charming streets of Lahti, discover local shops and cafes, and enjoy the lively atmosphere.",\n          "placeImageUrl": "https://www.visitlahti.fi/media/images/lahti-city-center-finland.jpg",\n          "geoCoordinates": "60.9880, 25.6420",\n          "ticketPricing": "N/A",\n          "timeToVisit": "2-3 hours"\n        }\n      ],\n      "bestTime": "Morning and afternoon"\n    },\n    {\n      "day": "Day 2 (2024-11-18)",\n      "activities": [\n        {\n          "time": "09:00 - 12:00",\n          "placeName": "Lahti Ski Jumping Hill",\n          "placeDetails": "Take a hike or cable car ride to the top of this iconic ski jumping hill for stunning views of the city and surrounding area.",\n          "placeImageUrl": "https://www.visitlahti.fi/media/images/lahti-ski-jumping-hill-finland.jpg",\n          "geoCoordinates": "60.9942, 25.6368",\n          "ticketPricing": "Cable car ride costs around €5",\n          "timeToVisit": "2-3 hours"\n        },\n        {\n          "time": "12:30 - 14:30",\n          "placeName": "Messilä",\n          "placeDetails": "Visit this resort area for outdoor activities like hiking, cross-country skiing, and snowshoeing.",\n          "placeImageUrl": "https://www.visitlahti.fi/media/images/messilä-resort-finland.jpg",\n          "geoCoordinates": "60.9875, 25.5825",\n          "ticketPricing": "Varies depending on activities",\n          "timeToVisit": "2-3 hours"\n        },\n        {\n          "time": "15:00 - 17:00",\n          "placeName": "Lahti Museum of Natural History",\n          "placeDetails": "Discover the fascinating natural history of the Lahti region and the surrounding Lake Päijänne.",\n          "placeImageUrl": "https://www.lahtimuseot.fi/media/images/lahti-museum-of-natural-history-finland.jpg",\n          "geoCoordinates": "60.9895, 25.6452",\n          "ticketPricing": "Free admission",\n          "timeToVisit": "1-2 hours"\n        }\n      ],\n      "bestTime": "Full day"\n    },\n    {\n      "day": "Day 3 (2024-11-19)",\n      "activities": [\n        {\n          "time": "09:00 - 11:00",\n          "placeName": "Lake Päijänne",\n          "placeDetails": "Take a boat trip or enjoy a lakeside walk along the shores of Lake Päijänne, the second largest lake in Finland.",\n          "placeImageUrl": "https://www.visitlahti.fi/media/images/lake-päijänne-finland.jpg",\n          "geoCoordinates": "61.0198, 25.7089",\n          "ticketPricing": "Boat trips vary in price",\n          "timeToVisit": "2-3 hours"\n        },\n        {\n          "time": "11:30 - 13:30",\n          "placeName": "Lahti City Theatre",\n          "placeDetails": "Catch a performance or take a tour of this historic theatre, known for its diverse programming.",\n          "placeImageUrl": "https://www.lahdenteatteri.fi/media/images/lahti-city-theatre-finland.jpg",\n          "geoCoordinates": "60.9882, 25.6409",\n          "ticketPricing": "Varies depending on the performance",\n          "timeToVisit": "1-2 hours"\n        },\n        {\n          "time": "14:00 - 16:00",\n          "placeName": "Lahti Market Square",\n          "placeDetails": "Enjoy a relaxing afternoon at the market square, surrounded by cafes, restaurants, and local vendors.",\n          "placeImageUrl": "https://www.visitlahti.fi/media/images/lahti-market-square-finland.jpg",\n          "geoCoordinates": "60.9879, 25.6415",\n          "ticketPricing": "N/A",\n          "timeToVisit": "1-2 hours"\n        }\n      ],\n      "bestTime": "Morning and afternoon"\n    },\n    {\n      "day": "Day 4 (2024-11-20)",\n      "activities": [\n        {\n          "time": "09:00 - 11:00",\n          "placeName": "Lahti University of Applied Sciences",\n          "placeDetails": "Visit the campus and learn about the university\'s programs and research activities.",\n          "placeImageUrl": "https://www.lamk.fi/media/images/lahti-university-of-applied-sciences-finland.jpg",\n          "geoCoordinates": "60.9855, 25.6375",\n          "ticketPricing": "N/A",\n          "timeToVisit": "1-2 hours"\n        },\n        {\n          "time": "11:30 - 13:30",\n          "placeName": "Lahti Church",\n          "placeDetails": "Admire the beautiful architecture of this historic church, located in the heart of Lahti.",\n          "placeImageUrl": "https://www.lahdenkirkko.fi/media/images/lahti-church-finland.jpg",\n          "geoCoordinates": "60.9878, 25.6405",\n          "ticketPricing": "Free admission",\n          "timeToVisit": "1-2 hours"\n        },\n        {\n          "time": "14:00 - 16:00",\n          "placeName": "Lahti Railway Station",\n          "placeDetails": "Enjoy a leisurely stroll through the train station and admire the architecture before returning to Helsinki.",\n          "placeImageUrl": "https://www.vr.fi/media/images/lahti-railway-station-finland.jpg",\n          "geoCoordinates": "60.9881, 25.6424",\n          "ticketPricing": "N/A",\n          "timeToVisit": "1-2 hours"\n        },\n        {\n          "time": "16:30 - 17:30",\n          "placeName": "Train to Helsinki",\n          "placeDetails": "Take the train back to Helsinki to enjoy the rest of the evening in the Finnish capital.",\n          "placeImageUrl": "N/A",\n          "geoCoordinates": "N/A",\n          "ticketPricing": "€10-€20",\n          "timeToVisit": "1 hour 15 minutes"\n        }\n      ],\n      "bestTime": "Morning and afternoon"\n    }\n  ]\n}\n```\n\n**Explanation:**\n\nThis JSON format contains all the necessary information for your trip to Lahti, Finland from Helsinki. \n\n* **tripDetails:** This section outlines the basic details of the trip like start and end date, destination, origin, number of travelers, and budget. \n* **transportation:**  This section lists the details of the train journey between Helsinki and Lahti, including providers, booking URLs, and approximate prices.\n* **accommodations:** This section provides a list of budget-friendly hotels in Lahti, including their names, addresses, prices, image URLs, geo-coordinates, ratings, and descriptions.\n* **dailyItinerary:** This section contains a detailed daily itinerary with suggested activities, times, place names, details, image URLs, geo-coordinates, ticket pricing, and estimated time to visit each location.  \n\n**Important Notes:**\n\n* **Pricing:** The prices listed are estimates and can vary depending on the time of year, availability, and booking conditions.\n* **Booking:** You can book your transportation and accommodations using the provided URLs.\n* **Flexibility:** Feel free to customize this itinerary to fit your interests and schedule.\n* **Weather:** Check the weather forecast before you go, as the weather in Finland can be unpredictable, especially during the autumn months. \n* **Currency:** The currency in Finland is the Euro (€). \n\nEnjoy your trip to Lahti! \n',
        },
      ],
    },
  ],
});


